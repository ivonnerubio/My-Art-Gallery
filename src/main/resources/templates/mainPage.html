<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0,user-scalable=0" />
    <title>Art Gallery</title>
    <link rel="stylesheet" th:href="@{/mainPage.css}"/>
<!--    <script th:src="@{/mainPage.js}"></script>-->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script>

        function addArtwork() {
            let xhr = new XMLHttpRequest();
            xhr.open("POST", "http://localhost:8080/api/v1/artwork/");

            xhr.setRequestHeader("Content-Type", "application/json");

            xhr.onload = () => console.log(xhr.responseText);


            let data = `{
            "name":"${document.querySelector('#newArtworkName').value}",
            "artist":"${document.querySelector('#newArtworkArtist').value}",
            "date":"${document.querySelector('#newArtworkDate').value}",
            "image":"${document.querySelector('#newArtworkURL').value}"
        }`;

            xhr.send(data);
            document.getElementById("addArtworkForm").reset();


            var element = document.getElementById("successArtwork");
            element.style.display = "block";


        }



        function changeStyle(){
            var element = document.getElementById("myDiv");
        //    element.style.display = "none";
            window.location.reload();
        }

    </script>

</head>
    <body>
    <h1 class="title">Welcome to the Art Gallery</h1>

    <div class="buttons">

        <div class="action_btn">

            <a href="#ViewDatabase"><button name="submit" class="btn btn-dark submit" type="submit" value="viewDatabase" onclick="myFunction2()">View Database</button></a>
            <a href="#AddArtwork"><button name="submit" class="btn btn-dark cancel" type="submit" value="addArt" onclick="myFunction()">Add Artwork</button></a>

        </div>

    </div>


    <div class = "carousel">
        <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="https://images.unsplash.com/photo-1564399580075-5dfe19c205f3?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxzZWFyY2h8M3x8YXJ0JTIwZ2FsbGVyeXxlbnwwfHwwfHw%3D&w=1000&q=80"
                         class="d-block w-100" alt="...">
                    <div class="carousel-caption">
                        <h5>Welcome to the Art Gallery</h5>
                        <p>You can begin by clicking on the arrows to view the pieces</p>
                    </div>
                </div>
                <div th:each="artwork: ${artworks}" class="carousel-item">
                    <img th:src="@{${artwork.image}}" class="d-block w-100" alt="...">
                    <div class="carousel-caption">
                        <h5 th:text="${artwork.name}"/>
                        <p th:text="${artwork.artist}"/>
                        <p th:text="${artwork.date}"/>
                    </div>
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div>



    <br><br>

    <h3 id="ViewDatabase" class="sub-title">Database</h3>

    <table class="table table-dark table-striped">
        <thead>
        <tr>
            <th scope="col">Id</th>
            <th scope="col">Artwork Name</th>
            <th scope="col">Artist</th>
            <th scope="col">Painted On</th>
            <th scope="col">URL</th>
        </tr>
        </thead>
        <tbody>

        <tr th:each="artwork: ${artworks}">
            <td th:text="${artwork.id}">
            <td th:text="${artwork.name}">
            <td th:text="${artwork.artist}">
            <td th:text="${artwork.date}">
            <td><a th:href="${artwork.image}" target="_blank">View Image</a></td>

        </tr>
        </tbody>
    </table>


    <h3 id="AddArtwork" class="sub-title">Add Artwork</h3>

    <form id="addArtworkForm">
        <div class="form-group">
            <label for="newArtworkName">Artwork Name</label>
            <input type="text" class="form-control" id="newArtworkName" aria-describedby="emailHelp">
            <small id="newArtworkNameHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
        </div>
        <div class="form-group">
            <label for="newArtworkArtist">Artist</label>
            <input type="text" class="form-control" id="newArtworkArtist">
        </div>
        <div class="form-group">
            <label for="newArtworkDate">Date of Creation</label>
            <input type="text" class="form-control" id="newArtworkDate">
        </div>
        <div class="form-group">
            <label for="newArtworkURL">Image URL</label>
            <input type="text" class="form-control" id="newArtworkURL">
        </div>
    </form>


    <div class = "addArtworkDiv">
        <button id="addArtworkButton" class="btn btn-primary btn-lg btn-block" onclick="addArtwork()">Add Artwork</button>
    </div>



    <div style="display:none" class="alert alert-success" id="successArtwork" role="alert">
        Artwork has been successfully added <button onClick="changeStyle()">View Artwork</button>
    </div>





    <br><br><br><br><br><br><br><br><br><br><br><br>
    <script type="text/javascript" src='<c:url value="/resources/js/jquery-1.9.1.js" />'></script>
    <script type="text/javascript" src='<c:url value="/resources/js/bootstrap.js" />'></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
            integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
            integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
            crossorigin="anonymous"></script>
</body>
</html>